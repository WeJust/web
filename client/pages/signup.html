<div class="container">

    <div class="row">
        <div class="row">
            <div class="col s12 center-align">
                <h2>Register {{data}}</h2>
            </div>
        </div>
        <form id="register-form" class="col s12" action="/signup" method="post" >
            <div class="row">
                <div class="input-field col s12">
                    <input name="email" type="email" class="validate" ng-model="emailField" required/>
                    <label>Email</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input name="username" type="text" class="validate" required ng-model="usernameField"
                           ng-blur="checkUsername()"/>
                    <label>Email</label>
                </div>
                <div id="usernameAlert" class="card-content red-text col s12" ng-show="usernameValid">
                    <p>Username already taken !</p>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input id="passwordField" name="password" type="password" class="validate" ng-model="passwordField"
                           required/>
                    <label>Password</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input id="passwordConfirm" name="password2" type="password" class="validate"/>
                    <label>Password confirmation</label>
                </div>
            </div>
            <div class="row">
                <div class="col s6">
                    <div class="card red lighten-5">
                        <div id="passwordAlert" class="card-content red-text">
                            <p>Password and password confirmation are different !</p>
                        </div>
                    </div>
                </div>
            </div>

            <input id="registerFormSubmit" type="submit" class="waves-effect waves-light btn btn-green"
                   value="Create account" ng-click="authenticate()" ng-disabled="!usernameValid"/>
        </form>

        <script type="text/javascript">
            $(document).ready(function () {
                $("#passwordAlert").hide();

                $("#passwordField, #passwordConfirm").keyup(function() {

                    var password = $("#passwordField").val();
                    var passwordConfimr = $("#passwordConfirm").val();

                    if (password.length < 6) {
                        $("#passwordAlert p").html("Password must be at least 6 character long");
                        $("#passwordAlert").show();
                        $("#registerFormSubmit").addClass("disabled");

                    } else {
                        $("#registerFormSubmit").removeClass("disabled");
                        $("#passwordAlert").hide();
                        $("#passwordAlert p").html("Password and password confirmation are different !");
                        if (password != passwordConfimr) {
                            $("#passwordAlert").show();
                            $("#registerFormSubmit").addClass("disabled");
                        }
                        else {
                            $("#passwordAlert").hide();
                            $("#registerFormSubmit").removeClass("disabled");
                        }
                    }
                });
            });
        </script>


    </div>
</div>
